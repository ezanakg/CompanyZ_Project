@startuml
 ' CompanyZ_Project - UML Class Diagram (generated from source)
 ' Updated: December 11, 2025

skinparam classAttributeIconSize 0

package "UI" {
  class AppLauncher {
    +main(String[] args)
  }

  class MainApp {
    -stage: Stage
    -authService: AuthService
    -employeeService: EmployeeService
    -payrollService: PayrollService
    -currentUser: User
    +start(Stage)
    -showLogin()
    -showAdmin()
    -showEmployee()
  }
}

package "Models" {
  class Employee {
    -empId:int
    -name:String
  }

  class PayrollRecord {
    -empId:int
    -salary:double
    -payDate:LocalDate
  }

  class EmployeeSearchResult {
    -empId:int
    -name:String
    -salary:double
  }

  class Report {
    -category:String
    -totalPayment:double
  }

  class UserCredentials {
    -username:String
    -role:String
    +isAdmin():boolean
    +isEmployee():boolean
  }
}

package "Users" {
  abstract class User {
    -username:String
    -role:String
    +displayDashboard()
    +logout()
  }

  class AdminUser {
    -employeeService:EmployeeService
    -payrollService:PayrollService
    +searchEmployees(String):String
    +applySalaryRaise(double,double,double):int
    +getJobTitleReport():String
    +getDivisionReport():String
  }

  class EmployeeUser {
    -payrollService:PayrollService
    +viewPayHistory():String
    +getSalaryInfo():String
  }

  User <|-- AdminUser
  User <|-- EmployeeUser
}

package "Services" {
  class AuthService {
    -authRepository:IAuthRepository
    +login(String,String):UserCredentials
    +isAdmin(UserCredentials):boolean
    +isEmployee(UserCredentials):boolean
  }

  class EmployeeService {
    -employeeRepository:IEmployeeRepository
    +searchEmployees(String):List
    +formatSearchResults(List):String
  }

  class PayrollService {
    -payrollRepository:IPayrollRepository
    +getPayHistory(int):List
    +applySalaryRaise(double,double,double):int
    +getJobTitleReport():List
    +getDivisionReport():List
    +formatPayHistory(List):String
    +formatReport(List,String):String
  }
}

package "Database" {
  class DBConnection {
    +getConnection():Connection
    +testConnection():boolean
  }
}

package "Repositories" {
  package "Interfaces" {
    interface IAuthRepository
    interface IEmployeeRepository
    interface IPayrollRepository
  }

  package "Implementations" {
    class AuthRepository
    class EmployeeRepository
    class PayrollRepository
  }

  package "Mock" {
    class MockAuthRepository
    class MockEmployeeRepository
    class MockPayrollRepository
  }
}

' Relations
AppLauncher --> MainApp : calls
MainApp --> AuthService : uses
MainApp --> EmployeeService : uses
MainApp --> PayrollService : uses

AdminUser ..> EmployeeService : uses
AdminUser ..> PayrollService : uses
EmployeeUser ..> PayrollService : uses

AuthService ..> IAuthRepository : depends on
EmployeeService ..> IEmployeeRepository : depends on
PayrollService ..> IPayrollRepository : depends on

AuthRepository ..|> IAuthRepository
EmployeeRepository ..|> IEmployeeRepository
PayrollRepository ..|> IPayrollRepository

MockAuthRepository ..|> IAuthRepository
MockEmployeeRepository ..|> IEmployeeRepository
MockPayrollRepository ..|> IPayrollRepository

' Real repositories use DBConnection
AuthRepository --> DBConnection : uses
EmployeeRepository --> DBConnection : uses
PayrollRepository --> DBConnection : uses

' Models usage
EmployeeRepository ..> Employee
EmployeeRepository ..> EmployeeSearchResult
PayrollRepository ..> PayrollRecord
PayrollRepository ..> Report
AuthRepository ..> UserCredentials

note bottom of DBConnection
  Active DBConnection class is at `src/database/DBConnection.java`
  The legacy duplicate in repo root is not referenced by the project.
end note

@enduml
